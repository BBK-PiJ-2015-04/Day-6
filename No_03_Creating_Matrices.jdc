/*

Create a class Matrix that has a 2-D array of integers as a field. The class
should have methods for:

	• a constructor method Matrix(int,int) setting the size of the array as two
	  integers (not necessarily the same). All elements in the matrix should be
	  initialised to 1.

	• a method setElement(int,int,int) to modify one element of the array,
	  given its position (the first two integers) and the new value to be put
	  in that position (the third integer). The method must check that the
	  indices are valid before modifying the array to avoid an
	  IndexOutOfBoundsException. If the indices are invalid, the method will do
	  nothing and the third argument will be ignored.

	• a method setRow(int,String) that modifies one whole row of the array,
	  given its position as an integer and the list of numbers as a String like
	  “1,2,3”. The method must check that the index is valid and the numbers
	  are correct (i.e. if the array has three columns, the String contains
	  three numbers). If the index or the String is invalid, the method will do
	  nothing.

	• a method setColumn(int,String) that modifies one whole column of the
	  array, given its position as an integer and the list of numbers as a
	  String like “1,2,3”. The method must check that the index is valid and
	  the numbers are correct (i.e. if the array has four rows, the String
	  contains four numbers). If the index or the String is invalid, the method
	  will do nothing.

	• a method toString() that returns the values in the array as a String
	  using square brackets, commas, and semicolons, e.g. “[1,2,3;4,5,6;3,2,1]”.

	• A method prettyPrint() that prints the values of the matrix on screen in
	  a legible format. Hint: you can use the special character ’\t’
	  (backslash-t) to mark a tabulator so that all numbers are placed in the
	  same column regardless of their size. You can think of a tabulator
	  character as a move-to-the-next-column command when printing on the
	  screen.

Create a Groovy program that uses all those methods from the Matrix class:
creates matrices, modifies its elements (one-by-one, by rows, and by columns),
and prints the matrix on the screen.

*/

println();
println();
println();
println("Please enter the desired size of the Matrix:");
print("Number of rows: ");
String str = System.console().readLine();
int rows = Integer.parseInt(str);
print("Number of columns: ");
str = System.console().readLine();
int columns = Integer.parseInt(str);

Matrix myOwnMatrix = new Matrix(rows, columns);

myOwnMatrix.prettyPrint();

println("How about changing an element?");
print("Enter the row number: ");
str = System.console().readLine();
int x = Integer.parseInt(str);
print("Enter the column number: ");
str = System.console().readLine();
int y = Integer.parseInt(str);
print("Enter the value: ");
str = System.console().readLine();
int z = Integer.parseInt(str);


myOwnMatrix.setElement(x, y, z);

myOwnMatrix.prettyPrint();

println("Now how about changing a whole row?");
print("Enter the row number: ");
str = System.console().readLine();
int row = Integer.parseInt(str);
print("Enter the row: ");
str = System.console().readLine();

myOwnMatrix.setRow(row, str);

myOwnMatrix.prettyPrint();

println("Now how about changing a whole column?");
print("Enter the column number: ");
str = System.console().readLine();
int column = Integer.parseInt(str);
print("Enter the column: ");
str = System.console().readLine();

myOwnMatrix.setColumn(column, str);

myOwnMatrix.prettyPrint();

class Matrix {
	
	int[][] mat;
	
	Matrix(int x, int y) {
		mat = new int[x][y];
		for (int i = 0; i < x; i++) {
			for (int j = 0; j < y; j++) {
				mat[i][j] = 1;
			}
		}
	}
	
	void setElement(int x, int y, int z) {
		int width = mat.length;
		int height = mat[0].length;
		if(x <= width && y <= height) {
			mat[x - 1][y - 1] = z;
		}
	}
	
	void setRow(int x, String str) {
		int width = mat.length;
		int height = mat[0].length;
		if (x <= height && rowValid(str) == true) {
			int row[] = rowToNumbers(str);
			if (row.length == width) {
				for (int i = 0; i < row.length; i++) {
					mat[x - 1][i] = row[i];
				}
			}
		}
	}
	
	void setColumn(int x, String str) {
		int width = mat.length;
		int height = mat[0].length;
		if (x <= width && rowValid(str) == true) {
			int row[] = rowToNumbers(str);
			if (row.length == height) {
				for (int i = 0; i < row.length; i++) {
					mat[i][x - 1] = row[i];
				}
			}
		}
	}
	
	void prettyPrint() {
		println();
		println("Here is your Matrix:");
		println();
		int width = mat.length;
		int height = mat[0].length;
		for (int i = 0; i < width; i++) {
			for (int j = 0; j < height; j++) {
				if (j == 0){
					print ("[");
				}
				if ((j + 1) == height) {
					println(mat[i][j] + "]");
				}	
				else {
					print(mat[i][j] + "\t");
				}
			}
		}
		println();
	}
	
	boolean rowValid(String str) {
		if(str.charAt(0) < 48 || str.charAt(0) > 57) {
			return false; // If the first character is not a number then fail!
		}
		// Next let's check all the other characters are numbers or commas
		for(int i = 0; i < str.length(); i++) {
			if(!((str.charAt(i) > 47 && str.charAt(i) < 58) || str.charAt(i) == ',')) {
				return false;
			}
		}
		// Now let's check that the last character is not a comma
		if(str.charAt(str.length() - 1) == ',') {
			return false;
		}
		return true;
	}

	int[] rowToNumbers(String str) {
		int numberCounter = 1;
		for(int i = 0; i < (str.length() - 1); i++) {
			if(str.charAt(i) == ',') {
				numberCounter++;
			}
		}
		String[] numbers;
		numbers = new String[numberCounter];
		int commaPosition = 0;
		int commaCounter = 0;
		for(int i = 0; i < (str.length() - 1); i++) {
			if(str.charAt(i) == ',') {
				numbers[commaCounter] = str.substring(commaPosition, i);
				commaCounter++;
				commaPosition = i + 1;
			}
			numbers[commaCounter] = str.substring(commaPosition, i + 2);
		}	
		int[] numbs;
		numbs = new int[commaCounter + 1];
		for (int i = 0; i <= commaCounter; i++) {
			numbs[i] = Integer.parseInt(numbers[i]);
		}	
	return numbs;
	}
}
